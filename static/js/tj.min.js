(function(){"use strict";var e={server_url:"https://ms.xunyou.com/api/statistics/event",show_log:!1,uid:"0",local_storage:{type:"cookie",disable:!1,secure_cookie:!1,cross_subdomain_cookie:!1,cookie_expiration:30},pageview:!0,track_type:"post"},t=["uid","cookie_id"];function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=window.device,r={},i=[];window.device=r;var a=window.document.documentElement,s=window.navigator.userAgent.toLowerCase(),c=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","roku","pov_tv","hbbtv","ce-html"];function u(e){return-1!==s.indexOf(e)}function l(e){return a.className.match(new RegExp(e,"i"))}function d(e){var t=null;l(e)||(t=a.className.replace(/^\s+|\s+$/g,""),a.className=t+" "+e)}function f(e){l(e)&&(a.className=a.className.replace(" "+e,""))}function b(){r.landscape()?(f("portrait"),d("landscape"),p("landscape")):(f("landscape"),d("portrait"),p("portrait")),g()}function p(e){for(var t in i)i[t](e)}r.macos=function(){return u("mac")},r.ios=function(){return r.iphone()||r.ipod()||r.ipad()},r.iphone=function(){return!r.windows()&&u("iphone")},r.ipod=function(){return u("ipod")},r.ipad=function(){return u("ipad")},r.android=function(){return!r.windows()&&u("android")},r.androidPhone=function(){return r.android()&&u("mobile")},r.androidTablet=function(){return r.android()&&!u("mobile")},r.blackberry=function(){return u("blackberry")||u("bb10")||u("rim")},r.blackberryPhone=function(){return r.blackberry()&&!u("tablet")},r.blackberryTablet=function(){return r.blackberry()&&u("tablet")},r.windows=function(){return u("windows")},r.windowsPhone=function(){return r.windows()&&u("phone")},r.windowsTablet=function(){return r.windows()&&u("touch")&&!r.windowsPhone()},r.fxos=function(){return(u("(mobile")||u("(tablet"))&&u(" rv:")},r.fxosPhone=function(){return r.fxos()&&u("mobile")},r.fxosTablet=function(){return r.fxos()&&u("tablet")},r.meego=function(){return u("meego")},r.cordova=function(){return window.cordova&&"file:"===location.protocol},r.nodeWebkit=function(){return"object"===n(window.process)},r.mobile=function(){return r.androidPhone()||r.iphone()||r.ipod()||r.windowsPhone()||r.blackberryPhone()||r.fxosPhone()||r.meego()},r.tablet=function(){return r.ipad()||r.androidTablet()||r.blackberryTablet()||r.windowsTablet()||r.fxosTablet()},r.desktop=function(){return!r.tablet()&&!r.mobile()},r.television=function(){for(var e=0;e<c.length;){if(u(c[e]))return!0;e++}return!1},r.portrait=function(){return screen.orientation&&Object.prototype.hasOwnProperty.call(window,"onorientationchange")?-1!==screen.orientation.type.indexOf("portrait"):window.innerHeight/window.innerWidth>1},r.landscape=function(){return screen.orientation&&Object.prototype.hasOwnProperty.call(window,"onorientationchange")?-1!==screen.orientation.type.indexOf("landscape"):window.innerHeight/window.innerWidth<1},r.noConflict=function(){return window.device=o,this},r.ios()?r.ipad()?d("ios ipad tablet"):r.iphone()?d("ios iphone mobile"):r.ipod()&&d("ios ipod mobile"):r.macos()?d("macos desktop"):r.android()?r.androidTablet()?d("android tablet"):d("android mobile"):r.blackberry()?r.blackberryTablet()?d("blackberry tablet"):d("blackberry mobile"):r.windows()?r.windowsTablet()?d("windows tablet"):r.windowsPhone()?d("windows mobile"):d("windows desktop"):r.fxos()?r.fxosTablet()?d("fxos tablet"):d("fxos mobile"):r.meego()?d("meego mobile"):r.nodeWebkit()?d("node-webkit"):r.television()?d("television"):r.desktop()&&d("desktop"),r.cordova()&&d("cordova"),r.onChangeOrientation=function(e){"function"==typeof e&&i.push(e)};var h="resize";function v(e){for(var t=0;t<e.length;t++)if(r[e[t]]())return e[t];return"unknown"}function g(){r.orientation=v(["portrait","landscape"])}Object.prototype.hasOwnProperty.call(window,"onorientationchange")&&(h="orientationchange"),window.addEventListener?window.addEventListener(h,b,!1):window.attachEvent?window.attachEvent(h,b):window[h]=b,b(),r.type=v(["mobile","tablet","desktop"]),r.os=v(["ios","iphone","ipad","ipod","android","blackberry","windows","fxos","meego","television"]),g();const w=r;var y=window;function m(e){return Object.prototype.toString.call(e)}var _="-1",k=y.external,x=y.navigator.userAgent||"",O=y.navigator.vendor||"",j=/\b(?:msie |ie |trident\/[0-9].*rv[ :])([0-9.]+)/,S=/\bbb10\b.+?\bversion\/([\d.]+)/,P=/\bblackberry\b.+\bversion\/([\d.]+)/,T=/\bblackberry\d+\/([\d.]+)/,z=[["nokia",function(e){return-1!==e.indexOf("nokia ")?/\bnokia ([0-9]+)?/:/\bnokia([a-z0-9]+)?/}],["samsung",function(e){return-1!==e.indexOf("samsung")?/\bsamsung(?:[ \-](?:sgh|gt|sm))?-([a-z0-9]+)/:/\b(?:sgh|sch|gt|sm)-([a-z0-9]+)/}],["wp",function(e){return-1!==e.indexOf("windows phone ")||-1!==e.indexOf("xblwp")||-1!==e.indexOf("zunewp")||-1!==e.indexOf("windows ce")}],["pc","windows"],["ipad","ipad"],["ipod","ipod"],["iphone",/\biphone\b|\biph(\d)/],["mac","macintosh"],["mi",/\bmi[ \-]?([a-z0-9 ]+(?= build|\)))/],["hongmi",/\bhm\b|redmi[ \-]?([a-z0-9]+)/],["aliyun",/\baliyunos\b(?:[\-](\d+))?/],["meizu",function(e){return e.indexOf("meizu")>=0?/\bmeizu[\/ ]([a-z0-9]+)\b/:/\bm([0-9cx]{1,4})\b/}],["nexus",/\bnexus ([0-9s.]+)/],["huawei",function(e){var t=/\bmediapad (.+?)(?= build\/huaweimediapad\b)/;return-1!==e.indexOf("huawei-huawei")?/\bhuawei\-huawei\-([a-z0-9\-]+)/:t.test(e)?t:/\bhuawei[ _\-]?([a-z0-9]+)/}],["lenovo",function(e){return-1!==e.indexOf("lenovo-lenovo")?/\blenovo\-lenovo[ \-]([a-z0-9]+)/:/\blenovo[ \-]?([a-z0-9]+)/}],["zte",function(e){return/\bzte\-[tu]/.test(e)?/\bzte-[tu][ _\-]?([a-su-z0-9\+]+)/:/\bzte[ _\-]?([a-su-z0-9\+]+)/}],["vivo",/\bvivo(?: ([a-z0-9]+))?/],["htc",function(e){return/\bhtc[a-z0-9 _\-]+(?= build\b)/.test(e)?/\bhtc[ _\-]?([a-z0-9 ]+(?= build))/:/\bhtc[ _\-]?([a-z0-9 ]+)/}],["oppo",/\boppo[_]([a-z0-9]+)/],["konka",/\bkonka[_\-]([a-z0-9]+)/],["sonyericsson",/\bmt([a-z0-9]+)/],["coolpad",/\bcoolpad[_ ]?([a-z0-9]+)/],["lg",/\blg[\-]([a-z0-9]+)/],["android",/\bandroid\b|\badr\b/],["blackberry",function(e){return e.indexOf("blackberry")>=0?/\bblackberry\s?(\d+)/:"bb10"}]],C=[["wp",function(e){return-1!==e.indexOf("windows phone ")?/\bwindows phone (?:os )?([0-9.]+)/:-1!==e.indexOf("xblwp")?/\bxblwp([0-9.]+)/:-1!==e.indexOf("zunewp")?/\bzunewp([0-9.]+)/:"windows phone"}],["windows",/\bwindows nt ([0-9.]+)/],["macosx",/\bmac os x ([0-9._]+)/],["iOS",function(e){return/\bcpu(?: iphone)? os /.test(e)?/\bcpu(?: iphone)? os ([0-9._]+)/:-1!==e.indexOf("iph os ")?/\biph os ([0-9_]+)/:/\bios\b/}],["yunos",/\baliyunos ([0-9.]+)/],["Android",function(e){return e.indexOf("android")>=0?/\bandroid[ \/-]?([0-9.x]+)?/:e.indexOf("adr")>=0?e.indexOf("mqqbrowser")>=0?/\badr[ ]\(linux; u; ([0-9.]+)?/:/\badr(?:[ ]([0-9.]+))?/:"android"}],["chromeos",/\bcros i686 ([0-9.]+)/],["linux","linux"],["windowsce",/\bwindows ce(?: ([0-9.]+))?/],["symbian",/\bsymbian(?:os)?\/([0-9.]+)/],["blackberry",function(e){var t=e.match(S)||e.match(P)||e.match(T);return t?{version:t[1]}:"blackberry"}]],E=[["edgehtml",/edge\/([0-9.]+)/],["trident",j],["blink",function(){return"chrome"in y&&"CSS"in y&&/\bapplewebkit[\/]?([0-9.+]+)/}],["webkit",/\bapplewebkit[\/]?([0-9.+]+)/],["gecko",function(e){var t;if(t=e.match(/\brv:([\d\w.]+).*\bgecko\/(\d+)/))return{version:t[1]+"."+t[2]}}],["presto",/\bpresto\/([0-9.]+)/],["androidwebkit",/\bandroidwebkit\/([0-9.]+)/],["coolpadwebkit",/\bcoolpadwebkit\/([0-9.]+)/],["u2",/\bu2\/([0-9.]+)/],["u3",/\bu3\/([0-9.]+)/]],D=[["edge",/edge\/([0-9.]+)/],["sogou",function(e){return e.indexOf("sogoumobilebrowser")>=0?/sogoumobilebrowser\/([0-9.]+)/:e.indexOf("sogoumse")>=0||/ se ([0-9.x]+)/}],["theworld",function(){var e=A("theworld");return void 0!==e?e:"theworld"}],["360",function(e){var t=A("360se");return void 0!==t?t:-1!==e.indexOf("360 aphone browser")?/\b360 aphone browser \(([^\)]+)\)/:/\b360(?:se|ee|chrome|browser)\b/}],["maxthon",function(){try{if(k&&(k.mxVersion||k.max_version))return{version:k.mxVersion||k.max_version}}catch(e){}return/\b(?:maxthon|mxbrowser)(?:[ \/]([0-9.]+))?/}],["micromessenger",/\bmicromessenger\/([\d.]+)/],["qq",/\bm?qqbrowser\/([0-9.]+)/],["green","greenbrowser"],["tt",/\btencenttraveler ([0-9.]+)/],["liebao",function(e){if(e.indexOf("liebaofast")>=0)return/\bliebaofast\/([0-9.]+)/;if(-1===e.indexOf("lbbrowser"))return!1;var t;try{k&&k.LiebaoGetVersion&&(t=k.LiebaoGetVersion())}catch(e){}return{version:t||_}}],["tao",/\btaobrowser\/([0-9.]+)/],["coolnovo",/\bcoolnovo\/([0-9.]+)/],["saayaa","saayaa"],["baidu",/\b(?:ba?idubrowser|baiduhd)[ \/]([0-9.x]+)/],["ie",j],["mi",/\bmiuibrowser\/([0-9.]+)/],["opera",function(e){var t=/\bopera.+version\/([0-9.ab]+)/;return t.test(e)?t:/\bopr\/([0-9.]+)/}],["oupeng",/\boupeng\/([0-9.]+)/],["yandex",/yabrowser\/([0-9.]+)/],["ali-ap",function(e){return e.indexOf("aliapp")>0?/\baliapp\(ap\/([0-9.]+)\)/:/\balipayclient\/([0-9.]+)\b/}],["ali-ap-pd",/\baliapp\(ap-pd\/([0-9.]+)\)/],["ali-am",/\baliapp\(am\/([0-9.]+)\)/],["ali-tb",/\baliapp\(tb\/([0-9.]+)\)/],["ali-tb-pd",/\baliapp\(tb-pd\/([0-9.]+)\)/],["ali-tm",/\baliapp\(tm\/([0-9.]+)\)/],["ali-tm-pd",/\baliapp\(tm-pd\/([0-9.]+)\)/],["uc",function(e){return e.indexOf("ucbrowser/")>=0?/\bucbrowser\/([0-9.]+)/:e.indexOf("ubrowser/")>=0?/\bubrowser\/([0-9.]+)/:/\buc\/[0-9]/.test(e)?/\buc\/([0-9.]+)/:e.indexOf("ucweb")>=0?/\bucweb([0-9.]+)?/:/\b(?:ucbrowser|uc)\b/}],["chrome",/ (?:chrome|crios|crmo)\/([0-9.]+)/],["android",function(e){if(-1!==e.indexOf("android"))return/\bversion\/([0-9.]+(?: beta)?)/}],["blackberry",function(e){var t=e.match(S)||e.match(P)||e.match(T);return t?{version:t[1]}:"blackberry"}],["safari",/\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//],["webview",/\bcpu(?: iphone)? os (?:[0-9._]+).+\bapplewebkit\b/],["firefox",/\bfirefox\/([0-9.ab]+)/],["nokia",/\bnokiabrowser\/([0-9.]+)/]];function A(e){if(k)try{var t=k.twGetRunPath.toLowerCase(),n=k.twGetSecurityID(y),o=k.twGetVersion(n);if(t&&-1===t.indexOf(e))return!1;if(o)return{version:o}}catch(e){}}var q={name:"",version:""};function V(e,t,n,o){var r=q;!function(e,t){for(var n=0,o=e.length;n<o&&!1!==t.call(e,e[n],n);n++);}(t,(function(t){var n=function(e,t,n){var o="[object Function]"===m(t)?t.call(null,n):t;if(!o)return null;var r={name:e,version:_,codename:""},i=m(o);if(!0===o)return r;if("[object String]"===i){if(-1!==n.indexOf(o))return r}else{if("[object Object]"===m(o))return o.hasOwnProperty("version")&&(r.version=o.version),r;if(o.exec){var a=o.exec(n);if(a)return a.length>=2&&a[1]?r.version=a[1].replace(/_/g,"."):r.version=_,r}}}(t[0],t[1],e);if(n)return r=n,!1})),n.call(o,r.name,r.version)}const M=function(e){e=(e||"").toLowerCase();var t={};V(e,z,(function(e,n){var o=parseFloat(n);t.device={name:e,version:o,fullVersion:n},t.device[e]=o}),t),V(e,C,(function(e,n){var o=parseFloat(n);t.os={name:e,version:o,fullVersion:n},t.os[e]=o}),t);var n=function(e){if(!j.test(e))return null;var t,n,o,r,i;if(-1!==e.indexOf("trident/")&&(t=/\btrident\/([0-9.]+)/.exec(e))&&t.length>=2){o=t[1];var a=t[1].split(".");a[0]=parseInt(a[0],10)+4,i=a.join(".")}r=(t=j.exec(e))[1];var s=t[1].split(".");return void 0===i&&(i=r),s[0]=parseInt(s[0],10)-4,n=s.join("."),void 0===o&&(o=n),{browserVersion:i,browserMode:r,engineVersion:o,engineMode:n,compatible:o!==n}}(e);return V(e,E,(function(e,o){var r=o;n&&(o=n.engineVersion||n.engineMode,r=n.engineMode);var i=parseFloat(o);t.engine={name:e,version:i,fullVersion:o,mode:parseFloat(r),fullMode:r,compatible:!!n&&n.compatible},t.engine[e]=i}),t),V(e,D,(function(e,o){var r=o;n&&("ie"===e&&(o=n.browserVersion),r=n.browserMode);var i=parseFloat(o);t.browser={name:e,version:i,fullVersion:o,mode:parseFloat(r),fullMode:r,compatible:!!n&&n.compatible},t.browser[e]=i}),t),t}(x+" "+O);var N,R={},I={each:function(e,t,n){if(null!=e)if(Array.isArray(e))e.forEach(t,n);else if(e.length===+e.length){for(var o=0,r=e.length;o<r;o++)if(o in e&&t.call(n,e[o],o,e)===R)return}else for(var i in e)if(e.hasOwnProperty.call(e,i)&&t.call(n,e[i],i,e)===R)return},extend:function(e){return I.each(Array.prototype.slice.call(arguments,1),(function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])})),e},isObject:function(e){return e===Object(e)&&!Array.isArray(e)},isUndefined:function(e){return void 0===e||""==e},isFunction:function(e){var t=!1;return"function"==typeof e&&(t=!0),t},base64Encode:function(e){return function(e){var t,n,o,r,i,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=0,c=0,u="",l=[];if(!e)return e;e=function(e){var t,n,o,r,i="";for(t=n=0,o=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,r=0;r<o;r++){var a=e.charCodeAt(r),s=null;a<128?n++:s=a>127&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),null!==s&&(n>t&&(i+=e.substring(t,n)),i+=s,t=n=r+1)}return n>t&&(i+=e.substring(t,e.length)),i}(e);do{t=(i=e.charCodeAt(s++)<<16|e.charCodeAt(s++)<<8|e.charCodeAt(s++))>>18&63,n=i>>12&63,o=i>>6&63,r=63&i,l[c++]=a.charAt(t)+a.charAt(n)+a.charAt(o)+a.charAt(r)}while(s<e.length);switch(u=l.join(""),e.length%3){case 1:u=u.slice(0,-2)+"==";break;case 2:u=u.slice(0,-1)+"="}return u}(e)},HTTPBuildQuery:function(e,t){var n,o,r=[];return I.isUndefined(t)&&(t="&"),I.each(e,(function(e,t){n=encodeURIComponent(e.toString()),o=encodeURIComponent(t),r[r.length]=o+"="+n})),r.join(t)},JSONDecode:function(e){try{return JSON.parse(e)}catch(e){return{}}},JSONEncode:function(e){try{return JSON.stringify(e)}catch(e){return""}}};function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}I.info={properties:function(){var e={"5.0":"Win2000",5.1:"WinXP",5.2:"Win2003","6.0":"WindowsVista",6.1:"Win7",6.2:"Win8",6.3:"Win8.1","10.0":"Win10"},t=w.windows(),n=M.os.name+" "+M.os.fullVersion;return t&&e[M.os.fullVersion]&&(n=e[M.os.fullVersion]),{properties:{windows_version:n,user_browser:M.browser.name,title:document.title||"",web_url:document.URL}}}},I.sendRequest=function(e,t,n,o){if(n._=(new Date).getTime().toString(),"img"===t){e+="?"+I.HTTPBuildQuery(n);var r=document.createElement("img");r.src=e,r.width=1,r.height=1,I.isFunction(o)&&o(0),r.onload=function(){this.onload=null},r.onerror=function(){this.onerror=null},r.onabort=function(){this.onabort=null}}else"get"===t?(e+="?"+I.HTTPBuildQuery(n),I.ajax.get(e,o)):"post"===t&&I.ajax.post(e,n,o)},I.ajax={post:function(e,t,n,o){var r=this;r.callback=n||function(e){};try{var i=new XMLHttpRequest;i.open("POST",e,!0),i.setRequestHeader("Content-type","application/json"),i.withCredentials=!0,i.ontimeout=function(){r.callback({status:0,error:!0,message:"request "+e+" time out"})},i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status)r.callback(I.JSONDecode(i.responseText));else{var e="Bad HTTP status: "+i.status+" "+i.statusText;r.callback({status:0,error:!0,message:e})}},i.timeout=o||5e3,i.send(I.JSONEncode(t))}catch(e){}},get:function(e,t){try{var n=new XMLHttpRequest;n.open("GET",e,!0),n.withCredentials=!0,n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status)t&&t(n.responseText);else if(t){var e="Bad HTTP status: "+n.status+" "+n.statusText;t({status:0,error:!0,message:e})}},n.send(null)}catch(e){}}},I.UUID=(N=function(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)},function(){var e=String(screen.height*screen.width);return e=e&&/\d{5,}/.test(e)?e.toString(16):String(31242*Math.random()).replace(".","").slice(0,8),N()+"-"+Math.random().toString(16).replace(".","")+"-"+function(e){var t,n,o=navigator.userAgent,r=[],i=0;function a(e,t){var n,o=0;for(n=0;n<t.length;n++)o|=r[n]<<8*n;return e^o}for(t=0;t<o.length;t++)n=o.charCodeAt(t),r.unshift(255&n),r.length>=4&&(i=a(i,r),r=[]);return r.length>0&&(i=a(i,r)),i.toString(16)}()+"-"+e+"-"+N()||(String(Math.random())+String(Math.random())+String(Math.random())).slice(2,15)}),I.localStorage={error:function(e){console.error("localStorage error: "+e)},parse:function(e){try{return I.JSONDecode(I.localStorage.get(e))||{}}catch(e){}return null},get:function(e){try{return window.localStorage.getItem(e)}catch(e){I.localStorage.error(e)}return null},set:function(e,t){try{window.localStorage.setItem(e,t)}catch(e){I.localStorage.error(e)}},remove:function(e){try{window.localStorage.removeItem(e)}catch(e){I.localStorage.error(e)}}},I.cookie={get:function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return decodeURIComponent(r.substring(t.length,r.length))}return null},parse:function(e){var t;try{t=I.JSONDecode(I.cookie.get(e))||{}}catch(e){}return t},set_seconds:function(e,t,n,o,r){var i="",a="",s="";if(o){var c=document.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),u=c?c[0]:"";i=u?"; domain=."+u:""}if(n){var l=new Date;l.setTime(l.getTime()+1e3*n),a="; expires="+l.toGMTString()}r&&(s="; secure"),document.cookie=e+"="+encodeURIComponent(t)+a+"; path=/"+i+s},set:function(e,t,n,o,r){var i="",a="",s="";if(o){var c=document.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),u=c?c[0]:"";i=u?"; domain=."+u:""}if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),a="; expires="+l.toGMTString()}r&&(s="; secure");var d=e+"="+encodeURIComponent(t)+a+"; path=/"+i+s;return document.cookie=d,d},remove:function(e,t){I.cookie.set(e,"",-1,t)}};const L=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.instance=e,this.local_storage=this.instance.local_storage,this.local_storage.register({sessionReferrer:document.referrer})}var n,o;return n=t,o=[{key:"track_pv",value:function(e,t){this.track("$pageview",I.extend({},e),t,"init")}},{key:"track",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;if(I.isUndefined(t))console.error("上报数据需要一个事件名称");else{I.isFunction(o)||(o=function(){});var r=this._toString_event_prop(n),i=this.instance.get_property("uid"),a={uid:i,sign_in_status:0==i?2:1,sdkType:"js",x_event_id:t,cookie_id:this.instance.get_device_id()};a=I.extend({},a,I.info.properties().properties,r),e.show_log&&console.log("上报的数据:",a);var s=function(e){o(e,a)},c=this.instance._get_config("server_url"),u=this.instance._get_config("track_type");I.sendRequest(c,u,W({},a),s)}}},{key:"_toString_event_prop",value:function(e){var t={};return I.isObject(e)&&I.each(e,(function(e,n){t[n]=-1===n.indexOf("x_")||I.isUndefined(e)?e:e.toString()})),t}}],o&&H(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),t}();function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const X=function(){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.instance=e,this.local_storage=this.instance.local_storage,this.event=this.instance.event}var o,r;return o=n,r=[{key:"_is_reserved_property",value:function(e){return t.indexOf(e)>-1}},{key:"_send_request",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;I.isFunction(n)||(n=function(){});var o=t,r=this.instance.get_property("uid"),i={uid:r,sign_in_status:0==r?2:1,sdkType:"js",cookie_id:this.instance.get_device_id()};i=I.extend({},i,I.info.properties().properties,o),e.show_log&&console.log("上报的数据（截取后）user:",i);var a=function(e){n(e,i)},s="https://ms.xunyou.com/api/statistics/public-properties",c=this.instance._get_config("track_type");I.sendRequest(s,c,G({},i),a)}},{key:"set",value:function(e,t,n){var o=this,r={};return I.isObject(e)?(I.each(e,(function(e,t){o._is_reserved_property(t)?console.warn("包含的保留属性，将无法修改！"):r[t]=e})),n=t):r[e]=t,this._send_request(r,n)}},{key:"login",value:function(e){this.local_storage.register({uid:e}),this._send_request()}},{key:"logout",value:function(){this.local_storage.register({uid:"0"}),this._send_request()}}],r&&Q(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),n}();function $(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var K=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.local_storage;I.isObject(n)?(this.name=n.name||"xytj2022jssdk","localStorage"===(n.type||"cookie")&&function(){var e=!0;try{var t="__xytjsupport__",n="xytj_web_data_sdk";I.localStorage.set(t,n),I.localStorage.get(t)!==n&&(e=!1),I.localStorage.remove(t)}catch(t){e=!1}return e||console.error("localStorage 不支持，自动退回到cookie存储方式"),e}()?this.storage=I.localStorage:this.storage=I.cookie,this.load(),this.update_config(n)):console.error("local_storage配置设置错误")}var t,n;return t=e,(n=[{key:"load",value:function(){var e=this.storage.parse(this.name);e&&(this.props=I.extend({},e))}},{key:"update_config",value:function(e){this.default_expiry=this.expire_days=e.cookie_expiration}},{key:"save",value:function(){this.storage.set(this.name,I.JSONEncode(this.props),this.expire_days)}},{key:"register",value:function(e,t){return!!I.isObject(e)&&(this.expire_days=void 0===t?this.default_expiry:t,I.extend(this.props,e),this.save(),!0)}},{key:"register_once",value:function(e,t,n){return!!I.isObject(e)&&(void 0===t&&(t="None"),this.expire_days=void 0===n?this.default_expiry:n,I.each(e,(function(e,n){this.props[n]&&this.props[n]!==t||(this.props[n]=e)}),this),this.save(),!0)}},{key:"unregister",value:function(e){e in this.props&&(delete this.props[e],this.save())}}])&&$(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Y=K;function Z(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const ee=function(){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.config={},this._set_config(I.extend({},e,n)),this.local_storage=new Y(this.config),this.event=new L(this),this.user=new X(this),this._set_device_id(),this._set_login_id(),this._set_public_properties(),this._refresh__public_properties()}var n,o;return n=t,(o=[{key:"_refresh__public_properties",value:function(){var e=this;setInterval((function(){e._set_public_properties()}),432e5)}},{key:"_set_device_id",value:function(){this.get_device_id()||this.local_storage.register_once({cookie_id:I.UUID()},"")}},{key:"_set_login_id",value:function(){this.local_storage.register({uid:this._get_config("uid")||"0"},"")}},{key:"_set_public_properties",value:function(e,t,n){this.user.set(e,t,n)}},{key:"_set_config",value:function(t){I.isObject(t)&&(this.config=I.extend(this.config,t),e.show_log=e.show_log||this._get_config("show_log"))}},{key:"_get_config",value:function(e){return this.config[e]}},{key:"get_device_id",value:function(){return this.get_property("cookie_id")}},{key:"get_property",value:function(e){return this.local_storage.props[e]}},{key:"_track_pv",value:function(e,t){this._get_config("pageview")?this.event.track_pv(e,t):this.event._session()}},{key:"track_event",value:function(e,t,n,o){this.event.track(e,t,n,o)}},{key:"login",value:function(e){this.user.login(e)}},{key:"logout",value:function(){this.user.logout()}},{key:"setPage",value:function(e,t,n){this.user.set(e,t,n)}}])&&Z(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),t}();function te(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),window._xytj=this}var t,n;return t=e,(n=[{key:"init",value:function(e){this.instance=new ee(e),this.instance.init=this.init,window._xytj=this.instance}}])&&te(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())})();